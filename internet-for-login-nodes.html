<!DOCTYPE html>
<html>
  <head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <title>
    
      Access the internet (for good) on login nodes behind firewalls | Bonan Zhu
    
  </title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta charset="utf-8">
  <link rel="stylesheet" href="/assets/css/main.css">
  <link rel="stylesheet" href="/assets/css/syntax.css">
  <!-- Use Atom -->
  <link type="application/atom+xml" rel="alternate" href="https://zhubonan.github.io/feed.xml" title="Bonan Zhu">
  <!-- Use RSS-2.0 -->
  <!--<link href="/rss-feed.xml" type="application/rss+xml" rel="alternate" title="Bonan Zhu | Computational Materials Scientist at UCL"/>
  //-->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700%7CPT+Sans:400">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Code+Pro">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Quattrocento+Sans">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML">
    MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [['$', '$'], ['\\(', '\\)']]
        }
      });
  </script>
  <!-- Google Analytics -->
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', '', 'auto');
  ga('send', 'pageview');
</script>

  <!-- Use Jekyll SEO plugin -->
  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Access the internet (for good) on login nodes behind firewalls | Bonan Zhu</title>
<meta name="generator" content="Jekyll v4.3.2">
<meta property="og:title" content="Access the internet (for good) on login nodes behind firewalls">
<meta name="author" content="Bonan Zhu">
<meta property="og:locale" content="en_US">
<meta name="description" content="On some computing clusters the login nodes do not have internet access. This is a pain for installing software that requires pulling data from a repository, e.g. Python, Julia and many others. Lucky, there is a simple way to bypass this limitation without hacking through the firewall - SOCKS5 proxy with ssh reverse tunnelling. This allows the internet traffic to be diverted to a tunnel established by ssh, going through the client (local) machine.">
<meta property="og:description" content="On some computing clusters the login nodes do not have internet access. This is a pain for installing software that requires pulling data from a repository, e.g. Python, Julia and many others. Lucky, there is a simple way to bypass this limitation without hacking through the firewall - SOCKS5 proxy with ssh reverse tunnelling. This allows the internet traffic to be diverted to a tunnel established by ssh, going through the client (local) machine.">
<link rel="canonical" href="https://zhubonan.github.io/internet-for-login-nodes">
<meta property="og:url" content="https://zhubonan.github.io/internet-for-login-nodes">
<meta property="og:site_name" content="Bonan Zhu">
<meta property="og:image" content="https://zhubonan.github.io/cards.jpg">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2022-11-19T00:00:00+00:00">
<meta name="twitter:card" content="summary_large_image">
<meta property="twitter:image" content="https://zhubonan.github.io/cards.jpg">
<meta property="twitter:title" content="Access the internet (for good) on login nodes behind firewalls">
<meta name="twitter:site" content="@1stbz">
<meta name="twitter:creator" content="@Bonan Zhu">
<meta name="google-site-verification" content="OpfWQC0z6rWcc-gHcJ6347BJqO7OPIcowyhcDSYKCXs">
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Bonan Zhu"},"dateModified":"2022-11-19T00:00:00+00:00","datePublished":"2022-11-19T00:00:00+00:00","description":"On some computing clusters the login nodes do not have internet access. This is a pain for installing software that requires pulling data from a repository, e.g. Python, Julia and many others. Lucky, there is a simple way to bypass this limitation without hacking through the firewall - SOCKS5 proxy with ssh reverse tunnelling. This allows the internet traffic to be diverted to a tunnel established by ssh, going through the client (local) machine.","headline":"Access the internet (for good) on login nodes behind firewalls","image":"https://zhubonan.github.io/cards.jpg","mainEntityOfPage":{"@type":"WebPage","@id":"https://zhubonan.github.io/internet-for-login-nodes"},"url":"https://zhubonan.github.io/internet-for-login-nodes"}</script>
<!-- End Jekyll SEO tag -->

</head>

  <body>
    <div class="container">
      <header class="header">
  <h3 class="header-title">
    <a href="/">Bonan Zhu</a>
    <small class="header-subtitle">Computational Materials Scientist at UCL</small>
    <div class="menu">
  <nav class="menu-content">
    
      <a href="/about.html">About me</a>
    
      <a href="/posts.html">Posts</a>
    
      <a href="/codes.html">Codes</a>
    
      <a href="/publications.html">Publications</a>
    
      <a href="/contact.html">Contact</a>
    
  </nav>
  <nav class="social-icons">
    
  
  
    <a href="https://www.github.com/zhubonan" target="_blank"><i class="fa fa-github" aria-hidden="true"></i></a>
  

  
  
    <a href="https://twitter.com/1stbz" target="_blank"><i class="fa fa-twitter" aria-hidden="true"></i></a>
  

  
  
    <a href="/feed.xml"><i class="fa fa-rss-square" aria-hidden="true"></i></a>
  

  </nav>
</div>

  </h3>
</header>

      <div class="content-container">
        <h1>
  Access the internet (for good) on login nodes behind firewalls
</h1>

  <img src="/assets/img/cards.jpg">

<article>
  <p>On some computing clusters the login nodes do not have internet access. 
This is a  pain for installing software that requires pulling data from a repository, e.g. Python, Julia and many others.
Lucky, there is a simple way to bypass this limitation without hacking through the firewall - SOCKS5 proxy with <code class="language-plaintext highlighter-rouge">ssh</code> <a href="https://man.openbsd.org/ssh">reverse tunnelling</a>. 
This allows the internet traffic to be diverted to  a tunnel established by <code class="language-plaintext highlighter-rouge">ssh</code>, going through the client (local) machine.</p>

<p>On the local machine, do:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ssh -R &lt;port_number&gt; &lt;username&gt;@&lt;hostname&gt;
</code></pre></div></div>

<p>On the remote machine, one can set the following environmental variables to tell there is a SOCKS5 proxy available:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>export http_proxy=socks5h://localhost:&lt;port_number&gt;
export https_proxy=socks5h://localhost:&lt;port_number&gt;
</code></pre></div></div>

<p>or</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>export http_proxy=socks5://localhost:&lt;port_number&gt;
export https_proxy=socks5://localhost:&lt;port_number&gt;
</code></pre></div></div>

<p>Where <code class="language-plaintext highlighter-rouge">&lt;port_number&gt;</code> is just a port that is not in use.
The only difference between the two is that the former will also divert domain resolution through SOCKS5.
Note that certain programs (or different versions of the same program) may only support one (or none) of the above protocols.
I have not extensively tested this, but seems that <code class="language-plaintext highlighter-rouge">wget</code> does not work with SOCKS5 at all, but <code class="language-plaintext highlighter-rouge">curl</code> does.
For python <code class="language-plaintext highlighter-rouge">pip</code> should work (depends on the <code class="language-plaintext highlighter-rouge">requests</code> library), <code class="language-plaintext highlighter-rouge">conda</code> should also work, but it may need the environmental variable to be in the upper caseâ€¦
Note that for these two one can also specify the proxy directly in the command line or in the configuration file.
For Julia, both the two ways above works with <code class="language-plaintext highlighter-rouge">Pkg</code> as of 1.8.</p>

</article>

  <span class="post-date">
  Written on
  
  November
  19th,
  2022
  by
  
    Bonan Zhu
  
</span>



  <div class="post-date">Feel free to share!</div>
<div class="sharing-icons">
  <a href="https://twitter.com/intent/tweet?text=Access%20the%20internet%20(for%20good)%20on%20login%20nodes%20behind%20firewalls&amp;url=/internet-for-login-nodes" target="_blank"><i class="fa fa-twitter" aria-hidden="true"></i></a>
  <a href="https://www.facebook.com/sharer/sharer.php?u=/internet-for-login-nodes&amp;title=Access%20the%20internet%20(for%20good)%20on%20login%20nodes%20behind%20firewalls" target="_blank"><i class="fa fa-facebook" aria-hidden="true"></i></a>
</div>



  <div class="related">
  <h1>You may also enjoy:</h1>
  
  <ul class="related-posts">
    
      
        
        
      
        
          <li>
            <h3>
              <a href="/aiida-2.0-and-compression">
                enabling data compression in AiiDA 2.0
                <!--<img src="https://zhubonan.github.io/images/">-->
                <!--<small>June 9, 2022</small>-->
              </a>
            </h3>
          </li>
          
        
      
        
          <li>
            <h3>
              <a href="/DFT-parallelisation-rule-of-thumb">
                DFT parallelisation rule of thumb
                <!--<img src="https://zhubonan.github.io/images/">-->
                <!--<small>February 15, 2022</small>-->
              </a>
            </h3>
          </li>
          
        
      
    
      
        
        
      
        
          <li>
            <h3>
              <a href="/parallel-efficiency-of-pw-DFT">
                Parallel efficiencies of (small) plane wave DFT calculations
                <!--<img src="https://zhubonan.github.io/images/">-->
                <!--<small>July 14, 2021</small>-->
              </a>
            </h3>
          </li>
          
        
      
        
          <li>
            <h3>
              <a href="/hello-world">
                Hello World!
                <!--<img src="https://zhubonan.github.io/images/">-->
                <!--<small>July 13, 2021</small>-->
              </a>
            </h3>
          </li>
          
        
      
    
      
        
        
      
    
  </ul>
</div>




      </div>
      <footer class="footer">
  
  
  
    <a href="https://www.github.com/zhubonan" target="_blank"><i class="fa fa-github" aria-hidden="true"></i></a>
  

  
  
    <a href="https://twitter.com/1stbz" target="_blank"><i class="fa fa-twitter" aria-hidden="true"></i></a>
  

  
  
    <a href="/feed.xml"><i class="fa fa-rss-square" aria-hidden="true"></i></a>
  

  <div class="footer-description"><a href="/">Bonan Zhu | Computational Materials Scientist at UCL by Bonan Zhu</a></div>
</footer>

    </div>
  </body>
</html>
